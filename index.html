<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Valentinstag 14. Februar</title>

  <style>
    :root { --pink:#ff4d88; --bg:#FFD8DF; }

    body{
      margin:0;
      min-height:100vh;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: var(--bg);
      overflow:hidden;
      color:#111;
    }

    .center{
      position:fixed;
      inset:0;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      gap: 18px;
      text-align:center;
      padding: 24px;
      z-index: 3;
      pointer-events:none;
    }
    .center > * { pointer-events:auto; }

    h1{
      margin:0;
      font-size: clamp(36px, 4.5vw, 58px);
      font-weight: 800;
      line-height: 1.05;
    }

    .btn-row{
      display:flex;
      gap: 26px;
      align-items:center;
      justify-content:center;
      min-height: 80px;
      position: relative;
    }

    button{
      border:0;
      padding: 18px 32px;
      border-radius: 18px;
      font-size: 22px;
      font-weight: 700;
      cursor:pointer;
      white-space:nowrap;
      user-select:none;
      transition: transform .16s ease, box-shadow .16s ease;
      box-shadow:
        0 12px 24px rgba(0,0,0,.16),
        0 2px 0 rgba(255,255,255,.4) inset;
    }

    .yes-button{
      background: var(--pink);
      color:#fff;
      transform-origin:center;
    }

    @keyframes wiggle {
      0% { transform: rotate(0) scale(var(--yesScale,1)); }
      25%{ transform: rotate(-4deg) scale(var(--yesScale,1)); }
      50%{ transform: rotate(4deg) scale(var(--yesScale,1)); }
      75%{ transform: rotate(-3deg) scale(var(--yesScale,1)); }
      100%{ transform: rotate(0) scale(var(--yesScale,1)); }
    }
    .yes-wiggle{
      animation: wiggle .45s ease-in-out infinite;
    }

    .no-button{
      background:#f3f3f3;
      color:#111;
    }

    .no-free{
      position: fixed;
      z-index: 4;
    }

    /* Safe-Zone (Text + Buttons) */
    .safe-zone{
      position:fixed;
      left:50%;
      top:50%;
      transform:translate(-50%,-50%);
      width:min(720px,92vw);
      height:260px;
      pointer-events:none;
      z-index:2;
    }

    /* Fixed GIF unter den Buttons */
    .fixed-gif{
      width: min(80px, 20vw);
      border-radius: 16px;
      box-shadow:0 10px 30px rgba(0,0,0,.14);
      display:none;              /* erst nach 1 Sekunde */
      margin-top: 10px;
    }

    .fixed-gif{
  width: min(240px, 55vw);
  border-radius: 16px;
  box-shadow:0 10px 30px rgba(0,0,0,.14);
  display:none;
  margin-top: 10px;

  opacity: 0;
  transform: translateY(6px) scale(0.98);
  transition: opacity 350ms ease, transform 350ms ease;
}
.fixed-gif.show{
  opacity: 1;
  transform: translateY(0) scale(1);
}

    .gif-overlay{
      position:fixed;
      inset:0;
      pointer-events:none;
      display:none;
      z-index:1;
    }
    .gif-overlay img{
      position:absolute;
      width:min(320px,70vw);
      border-radius:16px;
      box-shadow:0 16px 60px rgba(0,0,0,.3);
    }
  </style>
</head>

<body>

  <div class="safe-zone" id="safeZone"></div>

  <div class="center">
    <h1>Do you want to be my valentine?</h1>

    <div class="btn-row" id="btnRow">
      <button class="yes-button" id="yesBtn">Ja</button>
      <button class="no-button" id="noBtn">Nein</button>
    </div>

    <!-- FIXES GIF unter den Buttons (erscheint nach 1 Sekunde) -->
    <img
      id="fixedGif"
      class="fixed-gif"
      alt="Valentine Cat"
      src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExczRhbm5oM2c3cXZkdzdnbXNwb3BocHpxZjBweW5nZzEyNWc2ZjhuOCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/Zl7u48zLVFgLpRwq6f/giphy.gif"
    />
  </div>

  <div class="gif-overlay" id="gifOverlay">
    <img id="catGif" />
  </div>

<script>
  let messageIndex = 0;
  const messages = [
    "Nein üôÉ","Bist du sicher? üò≥","Denk bitte nochmal dar√ºber nach...", " Daneben! ",
    "Letzte Chance üò≠","Bitte? ü•∫","Wirklich nicht?","Nicht schnell genug!", "Wirklich?","Neeeiiiinnnnn", "AAAaaaa"
  ];

  /* >>> HIER GIFS EINF√úGEN <<< */
  const catGifs = [
      "https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExYzZ0NW9rNDYxcTFpbDZ0MmZ6ejYxZm1zamtvZDNvd3BreDE4ZXVvbCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/OHRF8LZis06OiPDJby/giphy.gif",
      "https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExMnQ2OWdnMnc5ZW5ib25od2VtMXNreGs0NWFvdWVnNnRmOGQ1bDdzOCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/wr7oA0rSjnWuiLJOY5/giphy.gif",
      "https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExOHluNDJjajRybG81bGxhcnphYWZ0dGx0MWY0N2VkcjRqNW81cTJwbiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/nR4L10XlJcSeQ/giphy.gif",
      "https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3ajRwejMzazNidmQxYTczdGd1NDE2dXY1bTJ6cG1tdzA3MHY1eGM0eiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/9uwnYUDw342pq/giphy.gif",
      "https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3cjB6Y3N4M3lieWpxbXBmZG1yMzU3cGM0M2NoZXNhOXR2dnEyYXh3YSZlcD12MV9naWZzX3NlYXJjaCZjdD1n/pVXyJy2k7WO1n49bGg/giphy.gif",
      "https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3cjB6Y3N4M3lieWpxbXBmZG1yMzU3cGM0M2NoZXNhOXR2dnEyYXh3YSZlcD12MV9naWZzX3NlYXJjaCZjdD1n/fdiOoSR8omN5RO36Yo/giphy.gif",
      "https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3YWI3a202OWNwdTFibW9jNXZzdmlxZXJocTltN2MycXNzNXY3amIxMSZlcD12MV9naWZzX3NlYXJjaCZjdD1n/hXafx5jj9HVBe/giphy.gif",
      "https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3YWI3a202OWNwdTFibW9jNXZzdmlxZXJocTltN2MycXNzNXY3amIxMSZlcD12MV9naWZzX3NlYXJjaCZjdD1n/dCc5BxTlXKNWrj8Hsi/giphy.gif",
      "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExOGpseGJ0ZWthNHZydDRsa3Uwb3ExeGw4djZhOHA1NjlhaXd2OHlhcyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/ASvQ3A2Q7blzq/giphy.gif",
      "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExdXltc2Zlb3N3NHRwM3Q4bXRhcDZzaTRqNWF1ZDN3Z3k1cTdteGEwNCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/5yXllvXr83bY4/giphy.gif",
      "https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3aXRjYnF4Y3F4dDQ1cnpiOHhkd3F4YjJkcjFhNTYxcGRsM2g5b21rciZlcD12MV9naWZzX3NlYXJjaCZjdD1n/oFvXciCA8px11faKJS/giphy.gif"
  ];

  const yesBtn = document.getElementById("yesBtn");
  const noBtn  = document.getElementById("noBtn");
  const gifOverlay = document.getElementById("gifOverlay");
  const catGif = document.getElementById("catGif");
  const safeZone = document.getElementById("safeZone");
  const fixedGif = document.getElementById("fixedGif");

  let noCount = 0;
  let yesScale = 1;
  let released = false;
  let gifIndex = 0;

  // Nach 20 mal bleibt Nein stehen
  const noStopCount = 20;

  function rand(min,max){ return Math.random()*(max-min)+min; }
  function nextGif(){ return catGifs[gifIndex++ % catGifs.length]; }

  function rectsOverlap(a,b){
    return !(a.right < b.left || a.left > b.right || a.bottom < b.top || a.top > b.bottom);
  }

  function getForbiddenRects(){
    const rects = [];
    rects.push(safeZone.getBoundingClientRect());

    // fixedGif z√§hlt erst als Sperrzone, wenn es sichtbar ist
    if (fixedGif.style.display !== "none") {
      const r = fixedGif.getBoundingClientRect();
      // ein bisschen "Padding" um das GIF herum, damit nix knapp dran klebt
      rects.push({
        left: r.left - 12,
        top: r.top - 12,
        right: r.right + 12,
        bottom: r.bottom + 12
      });
    }

    return rects;
  }

  function isAllowedRect(candidate){
    const forbidden = getForbiddenRects();
    for (const f of forbidden){
      if (rectsOverlap(candidate, f)) return false;
    }
    return true;
  }

  function moveNo(){
    const b = noBtn.getBoundingClientRect();
    const maxTries = 60;

    for(let i=0;i<maxTries;i++){
      const x = rand(16, innerWidth - b.width - 16);
      const y = rand(16, innerHeight - b.height - 16);

      const cand = { left:x, top:y, right:x+b.width, bottom:y+b.height };
      if (isAllowedRect(cand)){
        noBtn.style.left = x+"px";
        noBtn.style.top  = y+"px";
        return;
      }
    }

    // fallback
    noBtn.style.left = "16px";
    noBtn.style.top  = (innerHeight - b.height - 16) + "px";
  }

  function showGif(){
    const url = nextGif();
    catGif.src = url;
    gifOverlay.style.display = "block";

    // angenommene Gr√∂√üe f√ºr Platzierungs-Rect
    const w = Math.min(320, innerWidth * 0.7);
    const h = w * 0.75;

    const maxTries = 60;
    for(let i=0;i<maxTries;i++){
      const x = rand(16, innerWidth - w - 16);
      const y = rand(16, innerHeight - h - 16);

      const cand = { left:x, top:y, right:x+w, bottom:y+h };
      if (isAllowedRect(cand)){
        catGif.style.left = x+"px";
        catGif.style.top  = y+"px";
        return;
      }
    }

    // fallback
    catGif.style.left = "16px";
    catGif.style.top  = "16px";
  }

  function handleNoHover(){
    noCount++;
    noBtn.textContent = messages[messageIndex++ % messages.length];

    if(!released){
      released = true;
      noBtn.classList.add("no-free");
      document.body.appendChild(noBtn);
    }

    // nur bis 20 springt er weg
    if(noCount < noStopCount) moveNo();

    // GIFs sollen weiter in Dauerschleife kommen
    showGif();

    if(noCount <= 15){
      yesScale = Math.min(yesScale+.08,2.6);
      yesBtn.style.setProperty("--yesScale",yesScale);
      yesBtn.style.transform = `scale(${yesScale})`;
    } else {
      yesBtn.classList.add("yes-wiggle");
    }
  }

  noBtn.addEventListener("mouseenter", handleNoHover);

  yesBtn.onclick = () => location.href="loading.html?to=yes.html";
  noBtn.onclick  = () => location.href="loading.html?to=no.html";

  // >>> Nach 1 Sekunde fixes GIF unter den Buttons einblenden
  setTimeout(() => {
    fixedGif.style.display = "block";
    requestAnimationFrame(() => {
      fixedGif.classList.add("show");
    });
  }, 1000);

  // Optional: bei Resize bleibt alles logisch
  window.addEventListener("resize", () => {
    // Wenn Nein schon frei ist und noch springen darf:
    if (released && noCount < noStopCount) moveNo();
    // Random-GIF bleibt sichtbar, wird nur ggf. sp√§ter neu gesetzt beim n√§chsten Hover
  });
</script>

</body>
</html>
